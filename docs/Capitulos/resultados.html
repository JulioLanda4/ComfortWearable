<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="es" xml:lang="es"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.32">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>4&nbsp; Conclusiones – Reloj inteligente IoT basado en tecnologías abiertas para la recopilación de datos de confort térmico</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../Capitulos/references.html" rel="next">
<link href="../Capitulos/desarrollo.html" rel="prev">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-2486e1f0a3ee9ee1fc393803a1361cdb.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-e2a55d7d189d9ada6bd43e0674cebc09.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "Sin resultados",
    "search-matching-documents-text": "documentos encontrados",
    "search-copy-link-title": "Copiar el enlace en la búsqueda",
    "search-hide-matches-text": "Ocultar resultados adicionales",
    "search-more-match-text": "resultado adicional en este documento",
    "search-more-matches-text": "resultados adicionales en este documento",
    "search-clear-button-title": "Borrar",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancelar",
    "search-submit-button-title": "Enviar",
    "search-label": "Buscar"
  }
}</script>
<style>html{ scroll-behavior: smooth; }</style>
<script type="application/json" class="js-hypothesis-config">
{
  "theme": "clean"
}
</script>
<script async="" src="https://hypothes.is/embed.js"></script>
<script>
  window.document.addEventListener("DOMContentLoaded", function (_event) {
    document.body.classList.add('hypothesis-enabled');
  });
</script>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Alternar barra lateral" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../Capitulos/resultados.html"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Conclusiones</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Alternar barra lateral" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Buscar" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="../">Reloj inteligente IoT basado en tecnologías abiertas para la recopilación de datos de confort térmico</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Buscar"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Resumen</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Capitulos/intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introducción</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Capitulos/confort_termico.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Marco teórico</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Capitulos/desarrollo.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Diseño, desarrollo y validación</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Capitulos/resultados.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Conclusiones</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Capitulos/references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Referencias</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Tabla de contenidos</h2>
   
  <ul>
  <li><a href="#contribuciones-del-proyecto" id="toc-contribuciones-del-proyecto" class="nav-link active" data-scroll-target="#contribuciones-del-proyecto"><span class="header-section-number">4.1</span> Contribuciones del proyecto</a></li>
  <li><a href="#limitantes-del-proyecto" id="toc-limitantes-del-proyecto" class="nav-link" data-scroll-target="#limitantes-del-proyecto"><span class="header-section-number">4.2</span> Limitantes del proyecto</a></li>
  <li><a href="#trabajo-futuro" id="toc-trabajo-futuro" class="nav-link" data-scroll-target="#trabajo-futuro"><span class="header-section-number">4.3</span> Trabajo futuro</a></li>
  <li><a href="#conclusión-general" id="toc-conclusión-general" class="nav-link" data-scroll-target="#conclusión-general"><span class="header-section-number">4.4</span> Conclusión general</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Conclusiones</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>Este proyecto presenta el diseño, desarrollo y validación de un reloj inteligente basado en tecnologías abiertas, capaz de recopilar datos de confort térmico. El dispositivo realiza encuestas simplificadas y mide variables fisiológicas como la frecuencia cardíaca y la temperatura de la piel, integrando esta información con la plataforma IoT ThingsBoard. La utilización de hardware abierto como la placa de desarrollo XIAO ESP32C3 y sensores como el MAX30102 y el GY-906 asegura que el dispositivo sea replicable y adaptable a diversas investigaciones. En pruebas realizadas en Temixco, Morelos, el reloj logró recopilar cincuenta y dos mediciones en una campaña de cinco días, demostrando su funcionalidad en condiciones reales.</p>
<section id="contribuciones-del-proyecto" class="level2" data-number="4.1">
<h2 data-number="4.1" class="anchored" data-anchor-id="contribuciones-del-proyecto"><span class="header-section-number">4.1</span> Contribuciones del proyecto</h2>
<ol type="1">
<li><strong>Diseño basado en tecnologías abiertas</strong></li>
</ol>
<p>El reloj inteligente se desarrolla por completo utilizando tecnologías abiertas, tanto en hardware como en software. Para el hardware, el dispositivo integra componentes como la placa de desarrollo XIAO ESP32C3, el sensor MAX30102, el sensor GY-906, la pantalla XIAO Round Display, y otros componentes electrónicos. Para el software, el dispositivo se programa utilizando Arduino IDE, empleando lenguajes de programación como Arduino y C++. Los datos recopilados se envían a ThingsBoard, una plataforma de Internet de las Cosas (IoT, por sus siglas en inglés) de código abierto, para su almacenamiento.</p>
<p>Todo el proyecto se encuentra disponible en un repositorio de GitHub bajo la licencia GPL-3.0, lo que garantiza que cualquier persona pueda replicar, modificar o colaborar en el desarrollo del dispositivo. Fomentando la accesibilidad y colaboración en investigaciones futuras relacionadas con el confort térmico.</p>
<ol start="2" type="1">
<li><strong>Uso en condiciones reales</strong></li>
</ol>
<p>El reloj inteligente está diseñado para realizar campañas de medición prolongadas en condiciones reales, recolectando datos de usuarios en sus entornos habituales sin la necesidad de equipos complejos. Los datos recopilados por el reloj se combinan con información proporcionada en el formulario de registro generando una base de datos contextualizada que permite correlacionar las respuestas del usuario con las condiciones ambientales reales.</p>
<ol start="3" type="1">
<li><strong>Bajo costo</strong></li>
</ol>
<p>El desarrollo del reloj inteligente basado en tecnologías abiertas ha permitido implementar funcionalidades similares a las ofrecidas por combinaciones de dispositivos comerciales y aplicaciones existentes a un costo reducido. La aplicación Cozie, si bien ofrece una solución para el levantamiento de encuestas en relojes inteligentes, su uso está restringido a los Apple Watch y algunos modelos de Fitbit. Además, estos dispositivos tienen un costo elevado. El Apple Watch Series 8 (Apple Watch más económico que incluye sensor de temperatura) tiene un precio aproximado en el mercado al momento de la publicación de esta tesis de $5,500 MXN, mientras que, el Fitbit Versa 4 (compatible con Cozie) tiene un precio aproximado al momento de la publicación de esta tesis de $4,200 MXN. Existen dispositivos más económicos como el Fitbit Inspire 3 por un precio aproximado de $2,000 MXN que cumplen con la función de medir la frecuencia cardíaca y la temperatura de la piel, sin embargo no cuenta con la funcionalidad de realizar encuestas.</p>
<p>El reloj desarrollado en este proyecto, tiene un costo aproximado de $1,120 MXN e integra las capacidades de medición de variables fisiológicas y realización de encuestas. Esto lo convierte en una opción accesible y funcional.</p>
<ol start="4" type="1">
<li><strong>Adaptabilidad</strong></li>
</ol>
<p>El reloj inteligente cuenta con un diseño que permite su adaptación a diversas aplicaciones además de las encuestas de confort térmico. Puede configurarse para implementar otros tipos de encuestas o funcionalidades específicas según las necesidades del proyecto. Además, al estar desarrollado en Arduino sobre un microcontrolador ESP32 y emplear la biblioteca LVGL, ofrece la posibilidad de migrar su software a MicroPython, ampliando su versatilidad.</p>
</section>
<section id="limitantes-del-proyecto" class="level2" data-number="4.2">
<h2 data-number="4.2" class="anchored" data-anchor-id="limitantes-del-proyecto"><span class="header-section-number">4.2</span> Limitantes del proyecto</h2>
<p>A pesar de los logros alcanzados, el proyecto enfrenta algunas limitantes:</p>
<ol type="1">
<li><strong>Precisión de los sensores de bajo costo</strong></li>
</ol>
<p>Los sensores utilizados son sensores comerciales de bajo costo, que si bien cumplen con la funcionalidad requerida, se pueden ver afectados en términos de precisión y exactitud. Aunque estos sensores fueron sometidos a un proceso de calibración para disminuir errores, las mediciones podrían mejorarse con sensores de mayor precisión, aunque eso implicaría un costo más elevado del reloj.</p>
<ol start="2" type="1">
<li><strong>Ergonomía del reloj inteligente</strong></li>
</ol>
<p>El diseño actual del reloj inteligente lo convierte en un dispositivo grande para un reloj, lo cual puede resultar incomodo para algunos usuarios durante su uso de manera prolongada. Además, la carcasa presenta cierta fragilidad al no estar optimizada para impactos o condiciones adversas.</p>
</section>
<section id="trabajo-futuro" class="level2" data-number="4.3">
<h2 data-number="4.3" class="anchored" data-anchor-id="trabajo-futuro"><span class="header-section-number">4.3</span> Trabajo futuro</h2>
<p>El desarrollo del reloj inteligente plantea diversas oportunidades para extender su funcionalidad y aplicabilidad:</p>
<ol type="1">
<li><strong>Integración con el ecosistema del IER</strong></li>
</ol>
<p>Una de las principales tareas de trabajo a futuro es la integración del reloj inteligente al ecosistema de dispositivos del IER, que incluye la estación meteorológica ESOLMET y los distintos dispositivos en desarrollo en el Laboratorio de Tecnologías Abiertas y Más (LATA+). La integración del reloj con este ecosistema permitirá generar una base de datos más amplia y contextualizada, así como también permitirá la correlación de diferentes variables para el análisis de confort térmico.</p>
<ol start="2" type="1">
<li><strong>Campañas prolongadas de medición</strong></li>
</ol>
<p>Para generar una base de datos amplia representativa sobre confort térmico en Temixco, Morelos, se necesitan llevar a cabo campañas de medición durante varios meses con distintos usuarios. Para ello se requiere la fabricación de más relojes inteligentes, para aumentar la cantidad de participantes. A largo plazo, esta estrategia propiciara el estudio del confort térmico en Temixco, Morelos y en lugares con climas similares al de Temixco (Cálido subhúmedo)</p>
<ol start="3" type="1">
<li><strong>Desarrollo de modelos de confort térmico</strong></li>
</ol>
<p>La creación de una base de datos amplia y contextualizada abre la posibilidad al desarrollo de modelos de confort térmico adaptativos a contextos específicos, como el bioclima cálido subhúmedo característico de Temixco. Estos modelos podrían integrar variables ambientales como temperatura, humedad relativa y velocidad del viento, tomadas desde la estación meteorológica ESOLMET o los dispositivos desarrollados en el IER, junto con las variables fisiológicas tomadas por el reloj inteligente y datos obtenidos del formulario, tales como la edad, sexo, peso, altura y frecuencia de uso de aire acondicionado.</p>
<ol start="4" type="1">
<li><strong>Mejoras en los sensores</strong></li>
</ol>
<p>El diseño modular del reloj facilita la búsqueda e integración de sensores de mayor calidad que puedan reemplazar a los sensores actuales para facilitar el proceso de calibración, aumentar la exactitud y precisión de las lecturas, y mejorar la fiabilidad de los datos recopilados.</p>
<ol start="5" type="1">
<li><strong>Mejoras en el diseño de la carcasa</strong></li>
</ol>
<p>La carcasa es un punto que con conocimientos de diseño industrial e impresión 3D puede optimizarse bastante.</p>
<p>El diseño del dispositivo puede optimizarse mediante el uso de herramientas de diseño industrial e impresión 3D. Estas mejoras permitirían reducir el tamaño del dispositivo, hacerlo más cómodo y aumentar su resistencia a condiciones adversas.</p>
</section>
<section id="conclusión-general" class="level2" data-number="4.4">
<h2 data-number="4.4" class="anchored" data-anchor-id="conclusión-general"><span class="header-section-number">4.4</span> Conclusión general</h2>
<p>El reloj inteligente desarrollado en este proyecto demuestra cómo las tecnologías abiertas pueden utilizarse para crear herramientas funcionales destinadas a la investigación, en este caso especifico, en el campo del confort térmico. La simplicidad del diseño lo convierte en una solución viable para estudios de confort térmico en ambientes reales. Aunado a su capacidad para la recolección de datos de manera eficiente a través de la conexión con Thingsboard, abre la posibilidad de desarrollar modelos de confort térmico adaptativos.</p>
<p>No obstante, el dispositivo enfrenta algunos retos a superar, como mejorar la precisión de los sensores y optimizar el diseño y resistencia de la carcasa.</p>
<p>La integración del reloj inteligente al ecosistema del IER, así como las campañas de recolección de datos para la creación de bases de datos contextualizadas, permitirá a largo plazo correlacionar variables ambientales y fisiológicas para llevar a cabo estudios de confort térmico. El Desarrollo de modelos de confort adaptativos basados en estas bases de datos no solo contribuirá al estudio del confort térmico de manera general, sino que también servirá como base para el desarrollo de estrategias de diseño bioclimático especificas para regiones con bioclimas cálidos subhúmedos.</p>
<p>Este proyecto aporta una herramienta accesible para el ámbito de la investigación, al tiempo que abre nuevos retos y oportunidades de colaboración interdisciplinaria y de desarrollo tecnológico. Además, se alinea con la filosofía de las tecnologías abiertas, promoviendo su uso en beneficio de la comunidad científica y fomentando la transparencia, la colaboración y el acceso a herramientas que impulsen nuevas investigaciones.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copiado");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copiado");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../Capitulos/desarrollo.html" class="pagination-link" aria-label="Diseño, desarrollo y validación">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Diseño, desarrollo y validación</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../Capitulos/references.html" class="pagination-link" aria-label="Referencias">
        <span class="nav-page-text">Referencias</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




<script src="../site_libs/quarto-html/zenscroll-min.js"></script>
</body></html>